@model ShipDiplom.Models.Entities.Pier

@{
    ViewData["Title"] = "Создание причала";
}

<h2>@ViewData["Title"]</h2>

<div id="map" style="height: 500px; width: 100%;"></div>

@using (Html.BeginForm("CreatePier", "Pier", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    <div class="form-group">
        <label for="name">Наименование причала:</label>
        @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
    </div>
    <div class="form-group">
        <label for="trackingNumber">Номер трекинга:</label>
        @Html.EditorFor(model => model.TrackingNumber, new { htmlAttributes = new { @class = "form-control" } })
    </div>
    <div class="form-group">
        <label for="length">Длина:</label>
        @Html.EditorFor(model => model.Length, new { htmlAttributes = new { @class = "form-control" } })
    </div>
    <div class="form-group">
        <label for="width">Ширина:</label>
        @Html.EditorFor(model => model.Width, new { htmlAttributes = new { @class = "form-control" } })
    </div>
    <div class="form-group">
        <label for="location">Геолокация:</label>
        @Html.EditorFor(model => model.Location, new { htmlAttributes = new { @class = "form-control", @id = "location" } })
    </div>
    <button type="submit" class="btn btn-primary">Создать</button>
}

<script>
    var map = L.map('map').setView([55.7558, 37.6176], 13);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    var marker;

    map.on('click', function (e) {
        if (marker) {
            marker.setLatLng(e.latlng);
        } else {
            marker = L.marker(e.latlng).addTo(map);
        }
        document.getElementById('location').value = e.latlng.lat + ', ' + e.latlng.lng;
    });
</script>
